PRAGMA encoding = "UTF-8";
PRAGMA foreign_keys = ON;

-- CREATE TABLES --

CREATE TABLE PEERS (
	"id" INTEGER NOT NULL PRIMARY KEY,
	"ip" TEXT NOT NULL,
	"port" INTEGER NOT NULL
);

CREATE TABLE CONTENTS (
	"id" INTEGER NOT NULL PRIMARY KEY,
	"hash" TEXT NOT NULL
);

CREATE TABLE PEER_CONTENT (
	"id_peer" INTEGER NOT NULL REFERENCES PEERS (id) ON DELETE CASCADE,
	"id_content" INTEGER NOT NULL REFERENCES CONTENTS (id) ON DELETE CASCADE,
	"percent" INTEGER NOT NULL,
	PRIMARY KEY (id_peer, id_content)
);